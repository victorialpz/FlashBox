<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<link th:href="@{/css/styles.css}" rel="stylesheet"/>
<head>
    <meta charset="UTF-8">
    <title>FlashBox</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <link th:href="@{/css/styles.css}" rel="stylesheet"/>
</head>
<body>
<div class="container">

    <!-- TOPBAR ------------------------------------------------------>
    <div class="topbar">
        <h1 class="logo">FlashBox</h1>

        <!-- â€œmarginâ€‘left:autoâ€ empuja este bloque a la derecha -->
        <div class="icon-group" style="margin-left:auto;">

            <!-- Dropdown â˜° de categorÃ­as -->
            <div class="dropdown">
                <button class="hamburger" aria-label="CategorÃ­as">â˜°</button>
                <div class="dropdown-content">
                    <a th:each="cat : ${categorias}"
                       th:href="@{'/?categoria=' + ${cat}}"
                       th:text="${cat}">Cat</a>
                </div>
            </div>

            <!-- Favoritos solo si estÃ¡ logeado -->
            <a th:if="${session.usuario != null}"
               href="/cliente/favoritos"
               class="btn edit-btn" title="Favoritos">â­</a>

            <!-- Login o Logout -->
            <a th:if="${session.usuario == null}"
               href="/login" class="btn submit-btn">ğŸ”</a>
            <a th:if="${session.usuario != null}"
               href="/logout" class="btn delete-btn">ğŸšª</a>
        </div>
    </div>

    <!-- BOTONES vistosos bajo el tÃ­tulo para invitados -->
    <div th:if="${session.usuario == null}" style="text-align:center;margin-bottom:2em;">
        <a href="/login"    class="btn submit-btn">ğŸ” Iniciar sesiÃ³n</a>
        <a href="/registro" class="btn edit-btn">ğŸ“ Registrarse</a>
    </div>

    <!-- Saludo al usuario -->
    <h2 th:if="${session.usuario != null}"
        style="text-align:center;margin-bottom:1.5em;">
        Â¡Hola <span th:text="${session.usuario.nombre}">Usuario</span>!
    </h2>

    <!-- LISTA RESTAURANTES ------------------------------------------>
    <h2>ğŸ´ Restaurantes disponibles</h2>
    <ul class="menu-list">
        <li th:each="restaurante : ${restaurantes}" class="menu-item">
            <strong th:text="${restaurante.nombre}">Nombre</strong>
            <div style="display:flex;gap:.6em;">
                <a th:href="@{'/restaurante/menu/' + ${restaurante.id}}"
                   class="btn edit-btn">ğŸ“‹ Ver menÃº</a>
                <form th:action="@{/cliente/favoritos/agregar}" method="post">
                    <input type="hidden" th:name="restauranteId" th:value="${restaurante.id}"/>
                    <button type="submit" class="btn submit-btn">â­</button>
                </form>
            </div>
        </li>
    </ul>
</div>
</body>
</html>
